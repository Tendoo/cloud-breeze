<div class="table rounded border border-gray-400 bg-gray-100 w-full h-full" *ngIf="config">
    <div class="table-header border-t border-gray-200 bg-gray-100 h-16 p-2 text-lg flex justify-between items-center">
        <div class="table-title">
            <button [routerLink]="config.links.create" class="m-1 w-10 h-10 flex rounded-full border border-gray-400 hover:bg-white hover:shadow hover:border-none items-center justify-center">
                <mat-icon>add</mat-icon>
            </button>
        </div>
        <div class="table-tools">
            <button *ngIf="! searchEnabled" (click)="searchEnabled = true" class="m-1 w-10 h-10 flex rounded-full border border-gray-400 hover:bg-white hover:shadow hover:border-none items-center justify-center">
                <mat-icon>search</mat-icon>
            </button>
            <div *ngIf="searchEnabled" class="search-box shadow rounded-full p-1 flex bg-white">
                <button (click)="searchEnabled = false" class="outline-none w-10 h-10 flex rounded-full border bg-red-200 text-red-400 border-red-400 hover:shadow hover:border-none items-center justify-center">
                    <mat-icon>close</mat-icon>
                </button>
                <input [(ngModel)]="searchField" type="text" class="p-2 rounded-tl-lg rounded-bl-lg mr-2 outline-none">
                <button (click)="proceedSearch()" class="outline-none w-10 h-10 flex rounded-full border bg-gray-200 border-gray-400 hover:shadow hover:border-none items-center justify-center">
                    <mat-icon>search</mat-icon>
                </button>
            </div>
        </div>
    </div>
    <div class="flex w-full h-full">
        <table class="table-auto w-full">
            <thead>
                <tr class="bg-gray-200">
                    <td *ngFor="let column of columnsKeys" (click)="sortThis( config.columns[ column ] )" class="px-2 md:px-4 py-1 md:py-2 text-lg">
                        <div class="flex justify-between items-center cursor-pointer">
                            <span>{{ config.columns[ column ].label }}</span>
                            <button mat-icon-button>
                                <span *ngIf="config.columns[ column ]?.sortDirection === 'asc'" class="material-icons cursor-pointer">
                                    keyboard_arrow_down
                                </span>
                                <span *ngIf="config.columns[ column ]?.sortDirection === 'desc'" class="material-icons cursor-pointer">
                                    keyboard_arrow_up
                                </span>
                            </button>
                        </div>
                    </td>
                    <td class="w-10"></td>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let entry of config.results?.data" class="bg-gray-100 border-t border-gray-400">
                    <ng-container>
                        <td *ngFor="let column of columnsKeys"  class="px-4 py-2">{{ entry[ column ] }}</td>
                    </ng-container>
                    <td class="px-4 py-2 flex items-end flex-col">
                        <div [matMenuTriggerFor]="optionsMenu" class="border rounded-lg w-8 py-1 px-4 cursor-pointer hover:bg-white hover:border-none hover:shadow flex justify-center items-center">
                            <mat-icon>more_vert</mat-icon>
                        </div>
                        <mat-menu #optionsMenu="matMenu">
                            <button *ngFor="let button of entry.options" (click)="button.onClick( $event )" mat-menu-item>{{ button.label }}</button>
                            <button mat-menu-item>Help</button>
                        </mat-menu>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>